def lambda_handler(event, context):
    try:
        if event['multiValueQueryStringParameters']['command'][0] == "create-kubernetes-website":
            html_response = "You've hacked the mainframe!"
        else:
            html_response = "You've almost done it!"
    except Exception as e:
        print(f"Error: {e}")
        html_response = "Password not provided!"

    api_response = {
        'statusCode': 200,
        'headers': {
            'Content-Type': 'text/html; charset=utf-8',
            'Access-Control-Allow-Origin': '*',
        },
        'body': f"<p>{html_response}</p>",
    }
    print(api_response)
    return api_response

missing_magic_key={
    'resource': '/', 'path': '/', 'httpMethod': 'GET', 'headers': {'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,pt;q=0.8', 'cache-control': 'max-age=0', 'CloudFront-Forwarded-Proto': 'https', 'CloudFront-Is-Desktop-Viewer': 'true', 'CloudFront-Is-Mobile-Viewer': 'false', 'CloudFront-Is-SmartTV-Viewer': 'false', 'CloudFront-Is-Tablet-Viewer': 'false', 'CloudFront-Viewer-ASN': '20001', 'CloudFront-Viewer-Country': 'US', 'Host': 'atvz3xx49a.execute-api.us-east-2.amazonaws.com', 'sec-ch-ua': '"Chromium";v="122", "Not(A:Brand";v="24", "Google Chrome";v="122"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"', 'sec-fetch-dest': 'document', 'sec-fetch-mode': 'navigate', 'sec-fetch-site': 'none', 'sec-fetch-user': '?1', 'upgrade-insecure-requests': '1', 'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'Via': '2.0 751fc053858a7dcbf0836b1907c888d0.cloudfront.net (CloudFront)', 'X-Amz-Cf-Id': 'vjhY4OJzYQrl3INBzJSCU7VuJQQs-IfueczWWXH2a0qcAjf5xvK0Bg==', 'X-Amzn-Trace-Id': 'Root=1-65eb6afc-42b8f38974974f9546f5c3fc', 'X-Forwarded-For': '172.250.188.127, 130.176.213.205', 'X-Forwarded-Port': '443', 'X-Forwarded-Proto': 'https'}, 'multiValueHeaders': {'Accept': ['text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7'], 'Accept-Encoding': ['gzip, deflate, br, zstd'], 'Accept-Language': ['en-US,en;q=0.9,pt;q=0.8'], 'cache-control': ['max-age=0'], 'CloudFront-Forwarded-Proto': ['https'], 'CloudFront-Is-Desktop-Viewer': ['true'], 'CloudFront-Is-Mobile-Viewer': ['false'], 'CloudFront-Is-SmartTV-Viewer': ['false'], 'CloudFront-Is-Tablet-Viewer': ['false'], 'CloudFront-Viewer-ASN': ['20001'], 'CloudFront-Viewer-Country': ['US'], 'Host': ['atvz3xx49a.execute-api.us-east-2.amazonaws.com'], 'sec-ch-ua': ['"Chromium";v="122", "Not(A:Brand";v="24", "Google Chrome";v="122"'], 'sec-ch-ua-mobile': ['?0'], 'sec-ch-ua-platform': ['"macOS"'], 'sec-fetch-dest': ['document'], 'sec-fetch-mode': ['navigate'], 'sec-fetch-site': ['none'], 'sec-fetch-user': ['?1'], 'upgrade-insecure-requests': ['1'], 'User-Agent': ['Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36'], 'Via': ['2.0 751fc053858a7dcbf0836b1907c888d0.cloudfront.net (CloudFront)'], 'X-Amz-Cf-Id': ['vjhY4OJzYQrl3INBzJSCU7VuJQQs-IfueczWWXH2a0qcAjf5xvK0Bg=='], 'X-Amzn-Trace-Id': ['Root=1-65eb6afc-42b8f38974974f9546f5c3fc'], 'X-Forwarded-For': ['172.250.188.127, 130.176.213.205'], 'X-Forwarded-Port': ['443'], 'X-Forwarded-Proto': ['https']}, 'queryStringParameters': {'magicKey2': '123secretkey'}, 'multiValueQueryStringParameters': {'magicKey2': ['123secretkey']}, 'pathParameters': "None", 'stageVariables': "None", 'requestContext': {'resourceId': 'arsydmkfo9', 'resourcePath': '/', 'httpMethod': 'GET', 'extendedRequestId': 'UU2niGCYCYcEhxA=', 'requestTime': '08/Mar/2024:19:46:04 +0000', 'path': '/prod', 'accountId': '246363045090', 'protocol': 'HTTP/1.1', 'stage': 'prod', 'domainPrefix': 'atvz3xx49a', 'requestTimeEpoch': "1709927164719", 'requestId': '3c7c0a53-1769-4612-a9a4-17a9752c1437', 'identity': {'cognitoIdentityPoolId': "None", 'accountId': "None", 'cognitoIdentityId': "None", 'caller': "None", 'sourceIp': '172.250.188.127', 'principalOrgId': "None", 'accessKey': "None", 'cognitoAuthenticationType': "None", 'cognitoAuthenticationProvider': "None", 'userArn': "None", 'userAgent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'user': "None"}, 'domainName': 'atvz3xx49a.execute-api.us-east-2.amazonaws.com', 'deploymentId': 'wsc16x', 'apiId': 'atvz3xx49a'}, 'body': "None", 'isBase64Encoded': "False"}
with_magic_key={
    'resource': '/', 'path': '/', 'httpMethod': 'GET', 'headers': {'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept-Language': 'en-US,en;q=0.9,pt;q=0.8', 'cache-control': 'max-age=0', 'CloudFront-Forwarded-Proto': 'https', 'CloudFront-Is-Desktop-Viewer': 'true', 'CloudFront-Is-Mobile-Viewer': 'false', 'CloudFront-Is-SmartTV-Viewer': 'false', 'CloudFront-Is-Tablet-Viewer': 'false', 'CloudFront-Viewer-ASN': '20001', 'CloudFront-Viewer-Country': 'US', 'Host': 'atvz3xx49a.execute-api.us-east-2.amazonaws.com', 'sec-ch-ua': '"Chromium";v="122", "Not(A:Brand";v="24", "Google Chrome";v="122"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"', 'sec-fetch-dest': 'document', 'sec-fetch-mode': 'navigate', 'sec-fetch-site': 'none', 'sec-fetch-user': '?1', 'upgrade-insecure-requests': '1', 'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'Via': '2.0 751fc053858a7dcbf0836b1907c888d0.cloudfront.net (CloudFront)', 'X-Amz-Cf-Id': 'vjhY4OJzYQrl3INBzJSCU7VuJQQs-IfueczWWXH2a0qcAjf5xvK0Bg==', 'X-Amzn-Trace-Id': 'Root=1-65eb6afc-42b8f38974974f9546f5c3fc', 'X-Forwarded-For': '172.250.188.127, 130.176.213.205', 'X-Forwarded-Port': '443', 'X-Forwarded-Proto': 'https'}, 'multiValueHeaders': {'Accept': ['text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7'], 'Accept-Encoding': ['gzip, deflate, br, zstd'], 'Accept-Language': ['en-US,en;q=0.9,pt;q=0.8'], 'cache-control': ['max-age=0'], 'CloudFront-Forwarded-Proto': ['https'], 'CloudFront-Is-Desktop-Viewer': ['true'], 'CloudFront-Is-Mobile-Viewer': ['false'], 'CloudFront-Is-SmartTV-Viewer': ['false'], 'CloudFront-Is-Tablet-Viewer': ['false'], 'CloudFront-Viewer-ASN': ['20001'], 'CloudFront-Viewer-Country': ['US'], 'Host': ['atvz3xx49a.execute-api.us-east-2.amazonaws.com'], 'sec-ch-ua': ['"Chromium";v="122", "Not(A:Brand";v="24", "Google Chrome";v="122"'], 'sec-ch-ua-mobile': ['?0'], 'sec-ch-ua-platform': ['"macOS"'], 'sec-fetch-dest': ['document'], 'sec-fetch-mode': ['navigate'], 'sec-fetch-site': ['none'], 'sec-fetch-user': ['?1'], 'upgrade-insecure-requests': ['1'], 'User-Agent': ['Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36'], 'Via': ['2.0 751fc053858a7dcbf0836b1907c888d0.cloudfront.net (CloudFront)'], 'X-Amz-Cf-Id': ['vjhY4OJzYQrl3INBzJSCU7VuJQQs-IfueczWWXH2a0qcAjf5xvK0Bg=='], 'X-Amzn-Trace-Id': ['Root=1-65eb6afc-42b8f38974974f9546f5c3fc'], 'X-Forwarded-For': ['172.250.188.127, 130.176.213.205'], 'X-Forwarded-Port': ['443'], 'X-Forwarded-Proto': ['https']}, 'queryStringParameters': {'magicKey': '123secretkey'}, 'multiValueQueryStringParameters': {'magicKey': ['123secretkey']}, 'pathParameters': "None", 'stageVariables': "None", 'requestContext': {'resourceId': 'arsydmkfo9', 'resourcePath': '/', 'httpMethod': 'GET', 'extendedRequestId': 'UU2niGCYCYcEhxA=', 'requestTime': '08/Mar/2024:19:46:04 +0000', 'path': '/prod', 'accountId': '246363045090', 'protocol': 'HTTP/1.1', 'stage': 'prod', 'domainPrefix': 'atvz3xx49a', 'requestTimeEpoch': "1709927164719", 'requestId': '3c7c0a53-1769-4612-a9a4-17a9752c1437', 'identity': {'cognitoIdentityPoolId': "None", 'accountId': "None", 'cognitoIdentityId': "None", 'caller': "None", 'sourceIp': '172.250.188.127', 'principalOrgId': "None", 'accessKey': "None", 'cognitoAuthenticationType': "None", 'cognitoAuthenticationProvider': "None", 'userArn': "None", 'userAgent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'user': "None"}, 'domainName': 'atvz3xx49a.execute-api.us-east-2.amazonaws.com', 'deploymentId': 'wsc16x', 'apiId': 'atvz3xx49a'}, 'body': "None", 'isBase64Encoded': "False"}

print("With magic key:")
lambda_handler(with_magic_key, "ello")
print("Missing magic key:")
lambda_handler(missing_magic_key, "ello")
